# ç¢³æ’æ”¾æ•¸æ“šç¨®å­è³‡æ–™

é€™å€‹è³‡æ–™å¤¾åŒ…å«è‡ªå‹•ç”Ÿæˆçš„ç¢³æ’æ”¾æ•¸æ“šï¼Œç”¨æ–¼æ¸¬è©¦å’Œé–‹ç™¼ã€‚

## ğŸ“‹ æ–‡ä»¶èªªæ˜

### carbon-emissions-seed.json
è‡ªå‹•ç”Ÿæˆçš„éå» 6 å€‹æœˆï¼ˆ180å¤©ï¼‰çš„ç¢³æ’æ”¾æ•¸æ“šï¼ŒåŒ…å«ï¼š
- **æ•¸æ“šé»**: 180 ç­†ï¼ˆæ¯å¤©ä¸€ç­†ï¼‰
- **æ™‚é–“ç¯„åœ**: éå» 6 å€‹æœˆ
- **æ•¸æ“šå…§å®¹**:
  - Scope 1, 2, 3 ç¢³æ’æ”¾åˆ†é¡
  - é›»åŠ›ã€å¤©ç„¶æ°£ã€ç‡ƒæ–™ã€é‹è¼¸ã€å»¢æ£„ç‰©ã€ç”¨æ°´ç­‰ç´°åˆ†æ•¸æ“š
  - è‡ªå‹•ç”Ÿæˆçš„é€±æœ«æ•ˆæ‡‰ï¼ˆé€±æœ«æ’æ”¾è¼ƒä½ï¼‰
  - å­£ç¯€æ€§è®ŠåŒ–ï¼ˆå¤å­£å’Œå†¬å­£èƒ½æºä½¿ç”¨è¼ƒé«˜ï¼‰

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³• 1: ç›´æ¥å°å…¥æ•¸æ“šåº«ï¼ˆæ¨è–¦ï¼‰

å¦‚æœæ‚¨å·²ç¶“é…ç½®å¥½è³‡æ–™åº«ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å°å…¥è…³æœ¬ï¼š

```bash
# 1. ç¢ºä¿å·²è¨­ç½® DATABASE_URL ç’°å¢ƒè®Šæ•¸
# Windows PowerShell:
$env:DATABASE_URL="postgresql://user:password@localhost:5432/carbon_db"
# macOS/Linux:
export DATABASE_URL="postgresql://user:password@localhost:5432/carbon_db"

# 2. ç”Ÿæˆ Prisma Client
npx prisma generate

# 3. æ¨é€è³‡æ–™åº«çµæ§‹
npx prisma db push

# 4. å°å…¥æ•¸æ“šï¼ˆä½¿ç”¨ npm è…³æœ¬ï¼‰
npm run seed:import

# æˆ–ç›´æ¥ä½¿ç”¨ node
node scripts/import-seed-data.js
```

### æ–¹æ³• 2: ä½¿ç”¨ Prisma Seed è…³æœ¬

```bash
# 1. ç¢ºä¿å·²è¨­ç½® DATABASE_URL ç’°å¢ƒè®Šæ•¸
export DATABASE_URL="postgresql://user:password@localhost:5432/carbon_db"

# 2. åŸ·è¡Œ seed è…³æœ¬ï¼ˆæœƒç”Ÿæˆ 180 å¤©çš„æ•¸æ“šï¼‰
npm run prisma:seed
```

### æ–¹æ³• 3: æŸ¥çœ‹ JSON æ•¸æ“š

æ‚¨å¯ä»¥ç›´æ¥æŸ¥çœ‹ `carbon-emissions-seed.json` æ–‡ä»¶ä¾†äº†è§£æ•¸æ“šçµæ§‹ï¼š

```bash
# æŸ¥çœ‹æ•¸æ“šæ‘˜è¦
cat data/carbon-emissions-seed.json | jq '.metadata'

# æŸ¥çœ‹å‰ 5 ç­†æ•¸æ“š
cat data/carbon-emissions-seed.json | jq '.data[:5]'
```

## ğŸ¨ å‰ç«¯æ—¥æœŸç¯©é¸åŠŸèƒ½

å‰ç«¯å„€è¡¨æ¿å·²ç¶“æ”¯æŒæ—¥æœŸç¯©é¸åŠŸèƒ½ï¼š

### API ç«¯é»

```
GET /api/carbon/dashboard?startDate=2025-05-10&endDate=2025-11-05
```

**æŸ¥è©¢åƒæ•¸**:
- `startDate`: é–‹å§‹æ—¥æœŸï¼ˆæ ¼å¼: YYYY-MM-DDï¼‰
- `endDate`: çµæŸæ—¥æœŸï¼ˆæ ¼å¼: YYYY-MM-DDï¼‰
- å¦‚æœä¸æä¾›ï¼Œé è¨­é¡¯ç¤ºéå» 30 å¤©çš„æ•¸æ“š

### å‰ç«¯åŠŸèƒ½

å„€è¡¨æ¿é é¢ï¼ˆ`/dashboard`ï¼‰æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

1. **å¿«é€Ÿæ—¥æœŸé¸æ“‡å™¨**: å¯å¿«é€Ÿé¸æ“‡éå» 7 å¤©ã€30 å¤©ã€90 å¤©ã€180 å¤©æˆ–ä»Šå¹´çš„æ•¸æ“š
2. **è‡ªå®šç¾©æ—¥æœŸç¯„åœ**: å¯æ‰‹å‹•é¸æ“‡é–‹å§‹å’ŒçµæŸæ—¥æœŸ
3. **å¯¦æ™‚æ•¸æ“šæ›´æ–°**: æ¯ 5 ç§’è‡ªå‹•åˆ·æ–°æ•¸æ“š
4. **è¦–è¦ºåŒ–åœ–è¡¨**:
   - è¶¨å‹¢åœ–ï¼šé¡¯ç¤ºæ™‚é–“åºåˆ—çš„ç¢³æ’æ”¾è®ŠåŒ–
   - åœ“é¤…åœ–ï¼šé¡¯ç¤º Scope 1/2/3 çš„æ¯”ä¾‹
   - æŸ±ç‹€åœ–ï¼šæ¯”è¼ƒä¸åŒé¡åˆ¥çš„æ’æ”¾é‡

## ğŸ“Š æ•¸æ“šçµ±è¨ˆ

ç”Ÿæˆçš„æ•¸æ“šåŒ…å«ä»¥ä¸‹çµ±è¨ˆè³‡è¨Šï¼š

- **ç¸½ç¢³æ’æ”¾**: ~69,539 tCO2eï¼ˆéå» 180 å¤©ï¼‰
- **å¹³å‡æ¯æ—¥**: ~386 tCO2e
- **æœ€é«˜å–®æ—¥**: ~487 tCO2e
- **æœ€ä½å–®æ—¥**: ~250 tCO2e

æ•¸æ“šç‰¹æ€§ï¼š
- åŒ…å«é€±æœ«æ•ˆæ‡‰ï¼ˆé€±æœ«æ’æ”¾é™ä½ç´„ 30%ï¼‰
- åŒ…å«å­£ç¯€æ€§è®ŠåŒ–ï¼ˆå¤å­£å’Œå†¬å­£å¢åŠ ç´„ 15%ï¼‰
- æ¯æ—¥æ•¸æ“šåœ¨åŸºæº–å€¼ä¸Šæœ‰éš¨æ©Ÿæ³¢å‹•

## ğŸ”§ è‡ªå®šç¾©æ•¸æ“šç”Ÿæˆ

å¦‚æœæ‚¨éœ€è¦ç”Ÿæˆä¸åŒæ™‚é–“ç¯„åœçš„æ•¸æ“šï¼š

```bash
# æ–¹æ³• 1: ä½¿ç”¨ npm è…³æœ¬ï¼ˆæ¨è–¦ï¼‰
npm run seed:generate > data/carbon-emissions-seed-new.json

# æ–¹æ³• 2: ç›´æ¥ä½¿ç”¨ node
node scripts/generate-seed-data.js > data/carbon-emissions-seed-new.json

# å¦‚æœéœ€è¦ä¿®æ”¹å¤©æ•¸ï¼Œç·¨è¼¯ scripts/generate-seed-data.js
# ä¿®æ”¹ generateCarbonEmissionData(180) ä¸­çš„å¤©æ•¸åƒæ•¸
```

### å®Œæ•´æµç¨‹ï¼šç”Ÿæˆæ–°æ•¸æ“šä¸¦å°å…¥

```bash
# 1. ç”Ÿæˆæ–°çš„ç¢³æ’æ”¾æ•¸æ“š
npm run seed:generate > data/carbon-emissions-seed.json

# 2. å°å…¥åˆ°è³‡æ–™åº«
npm run seed:import
```

## ğŸ“ æ•¸æ“šçµæ§‹

æ¯ç­†æ•¸æ“šè¨˜éŒ„åŒ…å«ï¼š

```typescript
{
  date: string;              // ISO 8601 æ ¼å¼çš„æ—¥æœŸ
  scope1: number;            // ç›´æ¥æ’æ”¾ï¼ˆtCO2eï¼‰
  scope2: number;            // èƒ½æºé–“æ¥æ’æ”¾ï¼ˆtCO2eï¼‰
  scope3: number;            // å…¶ä»–é–“æ¥æ’æ”¾ï¼ˆtCO2eï¼‰
  totalCarbon: number;       // ç¸½ç¢³æ’æ”¾ï¼ˆtCO2eï¼‰
  electricity: number;       // é›»åŠ›ä½¿ç”¨ï¼ˆkWhï¼‰
  naturalGas: number;        // å¤©ç„¶æ°£ä½¿ç”¨ï¼ˆmÂ³ï¼‰
  fuel: number;              // ç‡ƒæ–™ä½¿ç”¨ï¼ˆLï¼‰
  transport: number;         // é‹è¼¸è·é›¢ï¼ˆkmï¼‰
  waste: number;             // å»¢æ£„ç‰©é‡ï¼ˆkgï¼‰
  water: number;             // ç”¨æ°´é‡ï¼ˆmÂ³ï¼‰
  dataSource: string;        // æ•¸æ“šä¾†æº
  verified: boolean;         // æ˜¯å¦å·²é©—è­‰
  notes: string;             // å‚™è¨»
}
```

## âš ï¸ æ³¨æ„äº‹é …

1. é€™äº›æ•¸æ“šæ˜¯è‡ªå‹•ç”Ÿæˆçš„æ¨¡æ“¬æ•¸æ“šï¼Œåƒ…ä¾›æ¸¬è©¦å’Œé–‹ç™¼ä½¿ç”¨
2. å¯¦éš›ç”Ÿç”¢ç’°å¢ƒæ‡‰ä½¿ç”¨çœŸå¯¦çš„ç¢³æ’æ”¾æ•¸æ“š
3. å°å…¥æ•¸æ“šå‰æœƒæ¸…é™¤è©²å…¬å¸çš„ç¾æœ‰ç¢³æ’æ”¾æ•¸æ“šï¼ˆè¦‹ `import-seed-data.ts`ï¼‰
4. è«‹ç¢ºä¿åœ¨æ¸¬è©¦ç’°å¢ƒä¸­ä½¿ç”¨ï¼Œé¿å…è¦†è“‹çœŸå¯¦æ•¸æ“š

## ğŸ¯ ç›¸é—œæ–‡ä»¶

- `/prisma/seed.ts`: Prisma ç¨®å­è…³æœ¬ï¼ˆTypeScriptï¼‰
- `/scripts/generate-seed-data.js`: JSON æ•¸æ“šç”Ÿæˆè…³æœ¬ï¼ˆJavaScriptï¼Œæ¨è–¦ï¼‰
- `/scripts/generate-seed-data.ts`: JSON æ•¸æ“šç”Ÿæˆè…³æœ¬ï¼ˆTypeScriptï¼‰
- `/scripts/import-seed-data.js`: æ•¸æ“šåº«å°å…¥è…³æœ¬ï¼ˆJavaScriptï¼Œæ¨è–¦ï¼‰
- `/scripts/import-seed-data.ts`: æ•¸æ“šåº«å°å…¥è…³æœ¬ï¼ˆTypeScriptï¼‰
- `/src/app/api/carbon/dashboard/route.ts`: å„€è¡¨æ¿ APIï¼ˆæ”¯æŒæ—¥æœŸç¯©é¸ï¼‰
- `/src/app/dashboard/page.tsx`: å„€è¡¨æ¿å‰ç«¯é é¢
